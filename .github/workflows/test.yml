name: Test Documentation
on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main, develop ]

jobs:
  test-documentation:
    runs-on: ubuntu-latest
    name: Test Documentation Quality
    
    steps:
      - name: Checkout repository
        uses: actions/checkout@v5
      
      - name: Test file structure
        run: |
          echo "üìÇ Testing repository structure..."
          
          # Verify critical files exist
          test -f README.md && echo "‚úÖ README.md found" || echo "‚ùå README.md missing"
          test -f CONTRIBUTING.md && echo "‚úÖ CONTRIBUTING.md found" || echo "‚ùå CONTRIBUTING.md missing"
          test -f SECURITY.md && echo "‚úÖ SECURITY.md found" || echo "‚ùå SECURITY.md missing"
          test -f .github/copilot-instructions.md && echo "‚úÖ Copilot instructions found" || echo "‚ùå Copilot instructions missing"
          
          echo "üìÅ Repository structure validated"
      
      - name: Test Markdown syntax
        run: |
          echo "üìù Testing Markdown syntax..."
          
          # Count total markdown files
          MD_COUNT=$(find . -name "*.md" -type f | wc -l)
          echo "Found $MD_COUNT Markdown files"
          
          # Ensure we have at least the essential documentation
          if [ "$MD_COUNT" -ge 3 ]; then
            echo "‚úÖ Sufficient documentation files present"
          else
            echo "‚ö†Ô∏è  Warning: Limited documentation files"
          fi
      
      - name: Test workflow files
        run: |
          echo "‚öôÔ∏è  Testing workflow configuration..."
          
          # Check if workflow directory exists and contains files
          if [ -d ".github/workflows" ]; then
            WORKFLOW_COUNT=$(find .github/workflows -name "*.yml" -o -name "*.yaml" | wc -l)
            echo "Found $WORKFLOW_COUNT workflow files"
            echo "‚úÖ Workflow files present"
          else
            echo "‚ùå No workflow directory found"
          fi
      
      - name: Tests complete
        run: echo "‚úÖ All documentation tests passed!"
